(this["webpackJsonpheroku-posts"]=this["webpackJsonpheroku-posts"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),l=(a(14),a(5)),u=a.n(l),s=a(8),i=a(4),p=a(2),E=Object(n.createContext)(),d={purchases:{items:[],loading:!1,error:null},removedPurchase:{id:0,loading:!1,error:null},editedPurchase:{item:{id:0,category:"",price:"",description:""},loading:!1,error:null},descPurchase:{item:{},id:0,loading:!1,error:null}};function m(e,t){switch(t.type){case"FETCH_PURCHASES_REQUEST":return Object(p.a)({},e,{loading:!0,error:null});case"FETCH_PURCHASES_SUCCESS":return{items:t.payload.items,loading:!1,error:null};case"FETCH_PURCHASES_FAILURE":return Object(p.a)({},e,{loading:!1,error:t.payload.error});default:return e}}function _(e,t){switch(t.type){case"REMOVE_PURCHASE_CONFIRM":return{id:t.payload.id,loading:!1,error:null};case"REMOVE_PURCHASE_CANCEL":return{id:0,loading:!1,error:null};case"REMOVE_PURCHASE_REQUEST":return Object(p.a)({},e,{loading:!0,error:null});case"REMOVE_PURCHASE_SUCCESS":return{id:0,loading:!1,error:null};case"REMOVE_PURCHASE_FAILURE":return Object(p.a)({},e,{loading:!1,error:t.payload.error});default:return e}}function C(e,t){switch(t.type){case"EDIT_PURCHASE_FIELD_CHANGE":return Object(p.a)({},e,{item:Object(p.a)({},e.item,Object(i.a)({},t.payload.name,t.payload.value))});case"EDIT_PURCHASE_EXISTING":return{item:Object(p.a)({},t.payload.item),loading:!1,error:null};case"EDIT_PURCHASE_CANCEL":return{item:{id:0,category:"image",price:"",description:""},loading:!1,error:null};case"EDIT_PURCHASE_REQUEST":return Object(p.a)({},e,{loading:!0,error:null});case"EDIT_PURCHASE_SUCCESS":return{item:{id:0,category:"image",price:"",description:""},loading:!1,error:null};case"EDIT_PURCHASE_FAILURE":return Object(p.a)({},e,{loading:!1,error:t.payload.error});default:return e}}function f(e,t){switch(t.type){case"GET_PURCHASE_BY_ID_REQUEST":return Object(p.a)({},e,{id:t.payload.id,loading:!0,error:null});case"GET_PURCHASE_BY_ID_SUCCSES":return{item:t.payload.item,id:t.payload.id,loading:!1,error:null,hide:!1};case"GET_PURCHASE_BY_ID_FAILURE":return Object(p.a)({},e,{loading:!1,error:t.payload.error,hide:!0});case" GET_PURCHASE_BY_ID_CANCEL":return Object(p.a)({},e,{loading:!1,error:null,hide:!0});default:return e}}function S(e,t){switch(t.type){case"FETCH_PURCHASES_REQUEST":case"FETCH_PURCHASES_SUCCESS":case"FETCH_PURCHASES_FAILURE":return Object(p.a)({},e,{purchases:m(e.purchases,t)});case"REMOVE_PURCHASE_CONFIRM":case"REMOVE_PURCHASE_CANCEL":case"REMOVE_PURCHASE_REQUEST":case"REMOVE_PURCHASE_SUCCESS":case"REMOVE_PURCHASE_FAILURE":return Object(p.a)({},e,{removedPurchase:_(e.removedPurchase,t)});case"EDIT_PURCHASE_FIELD_CHANGE":case"EDIT_PURCHASE_EXISTING":case"EDIT_PURCHASE_CANCEL":case"EDIT_PURCHASE_REQUEST":case"EDIT_PURCHASE_SUCCESS":case"EDIT_PURCHASE_FAILURE":return Object(p.a)({},e,{editedPurchase:C(e.editedPurchase,t)});case"GET_PURCHASE_BY_ID_REQUEST":case"GET_PURCHASE_BY_ID_SUCCSES":case"GET_PURCHASE_BY_ID_FAILURE":case" GET_PURCHASE_BY_ID_CANCEL":case"HIDE_DESCRIPTION":return Object(p.a)({},e,{descPurchase:f(e.descPurchase,t)});default:return e}}function h(e){var t=Object(n.useReducer)(S,d),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement(E.Provider,{value:{state:c,dispatch:o}},e.children)}var b=a(1),v=a.n(b),R=a(3);function U(e){return y.apply(this,arguments)}function y(){return(y=Object(R.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(A()),e.prev=1,e.next=4,fetch("https://some-app-heroku.herokuapp.com/api/purchases");case 4:if((a=e.sent).ok){e.next=7;break}throw new Error;case 7:return e.next=9,a.json();case 9:n=e.sent,t(g(n)),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(1),t(P(e.t0)),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function A(){return{type:"FETCH_PURCHASES_REQUEST",payload:{}}}function g(e){return{type:"FETCH_PURCHASES_SUCCESS",payload:{items:e}}}function P(e){return{type:"FETCH_PURCHASES_FAILURE",payload:{error:e}}}function H(e,t){return I.apply(this,arguments)}function I(){return(I=Object(R.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(T()),e.prev=1,e.next=4,fetch("https://some-app-heroku.herokuapp.com/api/purchases/".concat(a),{method:"DELETE"});case 4:if(e.sent.ok){e.next=7;break}throw new Error;case 7:t(k()),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),t(O(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function T(){return{type:"REMOVE_PURCHASE_REQUEST",payload:{}}}function k(){return{type:"REMOVE_PURCHASE_SUCCESS",payload:{}}}function O(e){return{type:"REMOVE_PURCHASE_FAILURE",payload:{error:e}}}function x(e,t){return N.apply(this,arguments)}function N(){return(N=Object(R.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(w()),e.prev=1,e.next=4,fetch("https://some-app-heroku.herokuapp.com/api/purchases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if(e.sent.ok){e.next=7;break}throw new Error;case 7:t(D()),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),t(j(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function w(){return{type:"EDIT_PURCHASE_REQUEST",payload:{}}}function D(){return{type:"EDIT_PURCHASE_SUCCESS",payload:{}}}function j(e){return{type:"EDIT_PURCHASE_FAILURE",payload:{error:e}}}function F(e){return{type:"GET_PURCHASE_BY_ID_REQUEST",payload:{id:e}}}function L(e,t){return{type:"GET_PURCHASE_BY_ID_SUCCSES",payload:{item:e,id:t}}}function G(e){return{type:"GET_PURCHASE_BY_ID_FAILURE",payload:{error:e}}}function M(e,t){return B.apply(this,arguments)}function B(){return(B=Object(R.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(F(a)),e.prev=1,e.next=4,fetch("https://some-app-heroku.herokuapp.com/api/purchases/".concat(a));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error;case 7:return e.next=9,n.json();case 9:r=e.sent,console.log(r),t(L(r,a)),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(1),t(G(e.t0)),e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function V(){return r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}function Q(){var e=Object(n.useContext)(E),t=e.state.editedPurchase,a=e.dispatch,c=function(){var e=Object(R.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,x(a,t.item);case 4:return e.next=6,U(a);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),o=function(e){var t=e.target,n=t.name,r=t.value;console.log(n,r),a(function(e,t){return{type:"EDIT_PURCHASE_FIELD_CHANGE",payload:{name:e,value:t}}}(n,r))};return r.a.createElement("form",{onSubmit:c,onReset:function(){a({type:"EDIT_PURCHASE_CANCEL",payload:{}})}},r.a.createElement("div",{className:"input-group col-12"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f")),r.a.createElement("select",{name:"category",onChange:o,className:"custom-select col-3",id:"inputGroupSelect04","aria-label":"Example select with button addon",value:t.item.category},r.a.createElement("option",{selected:!0},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c..."),r.a.createElement("option",{value:"Travel"},"\u041f\u0443\u0442\u0438\u0448\u0435\u0441\u0442\u0432\u0438\u044f"),r.a.createElement("option",{value:"Food"},"\u0415\u0434\u0430"),r.a.createElement("option",{value:"Cars"},"\u041c\u0430\u0448\u0438\u043d\u044b")),r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"\u0426\u0435\u043d\u0430")),r.a.createElement("input",{name:"price",onChange:o,value:t.item.price,type:"text",class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default"}),r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435")),r.a.createElement("input",{name:"description",onChange:o,value:t.item.description})," ",t.loading?r.a.createElement(V,null):t.error?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"),r.a.createElement("button",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c"),r.a.createElement("button",{type:"reset"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{class:"btn btn-outline-primary"},0===t.item.id?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement("button",{class:"btn btn-outline-danger",type:"reset"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"))))}function Y(e){var t=e.purchase,a=Object(n.useContext)(E),c=a.state,o=c.removedPurchase,l=c.descPurchase,u=a.dispatch,s=function(e){e.preventDefault(),u({type:"EDIT_PURCHASE_EXISTING",payload:{item:t}})},i=function(e){e.preventDefault(),u({type:"REMOVE_PURCHASE_CONFIRM",payload:{id:t.id}})},p=function(){var e=Object(R.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,H(u,t.id);case 4:return e.next=6,U(u);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e){e.preventDefault(),u({type:" GET_PURCHASE_BY_ID_CANCEL",payload:{}})},m=function(){var e=Object(R.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,M(u,t.id);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),_=function(e){e.preventDefault(),u({type:"REMOVE_PURCHASE_CANCEL",payload:{}})},C=function(){var e=Object(R.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,M(u,t.id);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("article",null,r.a.createElement("div",{className:"card"},r.a.createElement("h5",{className:"card-header"},"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u2116",t.id," ",r.a.createElement("span",{className:"to-right"},o.id!==t.id?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{class:"btn btn-outline-dark btn-sm",onClick:s},r.a.createElement("i",{class:"fa fa-pencil"})),r.a.createElement("button",{className:"btn btn-outline-danger btn-sm ",onClick:i},r.a.createElement("i",{className:"fa fa-trash"}))):o.loading?r.a.createElement(V,null):o.error?r.a.createElement("div",null,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c?",r.a.createElement("button",{className:"btn btn-outline-danger",onClick:p},"\u0414\u0430"),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:_},"\u041d\u0435\u0442")):r.a.createElement("div",null,"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442?",r.a.createElement("button",{className:"btn btn-outline-danger",onClick:p},"\u0414\u0430"),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:_},"\u041d\u0435\u0442")))),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title center"},"\u0426\u0435\u043d\u0430: ",t.price,"$"),r.a.createElement("p",{className:"card-text center"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: ",t.category),r.a.createElement("span",null,function(){if(l.id!==t.id)return r.a.createElement("div",null,r.a.createElement("button",{class:"btn btn-outline-info",onClick:C},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"));if(l.loading)return r.a.createElement(V,null);if(l.error)return r.a.createElement("div",null,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c?",r.a.createElement("button",{className:"btn btn-outline-danger",onClick:m},"\u0414\u0430"),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:d},"\u041d\u0435\u0442"));var e=l.item;return r.a.createElement("div",null,"description: ",e)}())))))}function z(){var e=Object(n.useContext)(E).state.purchases.items;return r.a.createElement("div",{className:"input-group mb-3 col-12"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"\u0418\u0442\u043e\u0433\u043e")),r.a.createElement("input",{type:"text",className:"form-control",value:e.reduce((function(e,t){return e+parseInt(t.price,0)}),0)}))}function J(){var e=Object(n.useContext)(E),t=e.state,a=e.dispatch,c=t.purchases,o=c.items,l=c.loading,u=c.error,s=function(){var e=Object(R.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(a);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Object(R.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(a);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))()}),[a]);var i=r.a.createElement("div",null,r.a.createElement("div",null,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"),r.a.createElement("div",null,r.a.createElement("button",{class:"btn btn-outline-dark",onClick:s},"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0451 \u0440\u0430\u0437")));return r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"list-group col-12"},o.map((function(e){return r.a.createElement("li",{className:"list-group-item"},r.a.createElement(Y,{key:e.id,purchase:e}))}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"to-center"},l&&r.a.createElement(V,null)," ",u&&i)),r.a.createElement(z,null))}var X=function(){return r.a.createElement("div",{className:u.a.reduxBlock},r.a.createElement("div",{className:u.a.App},r.a.createElement(h,null,r.a.createElement(Q,null),r.a.createElement(J,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,a){e.exports={App:"App_App__16ZpL"}},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.1fbd66f2.chunk.js.map